#include "myBigChars.h"
char bc_char_plus[] = {
	 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 1, 1, 0, 0, 0,
	 0, 0, 0, 1, 1, 0, 0, 0,
	 0, 1, 1, 1, 1, 1, 1, 0,
	 0, 1, 1, 1, 1, 1, 1, 0,
	 0, 0, 0, 1, 1, 0, 0, 0,
	 0, 0, 0, 1, 1, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0
};

char bc_char_minus[] = {
	 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 1, 1, 1, 1, 1, 1, 0,
	 0, 1, 1, 1, 1, 1, 1, 0,
	 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0,
	 0, 0, 0, 0, 0, 0, 0, 0
};

char bc_char_0[] = {
	 0, 0, 1, 1, 1, 1, 0, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 1, 0, 0, 0, 0, 0, 0, 1,
	 1, 0, 0, 0, 0, 0, 0, 1,
	 1, 0, 0, 0, 0, 0, 0, 1,
	 1, 0, 0, 0, 0, 0, 0, 1,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 0, 1, 1, 1, 1, 0, 0
};

char bc_char_1[] = {
	 0, 0, 0, 0, 0, 1, 1, 0,
	 0, 0, 0, 0, 1, 0, 1, 0,
	 0, 0, 0, 1, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0
};

char bc_char_2[] = {
	 0, 0, 0, 1, 1, 1, 0, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 1, 0, 0,
	 0, 0, 0, 0, 1, 0, 0, 0,
	 0, 0, 0, 1, 0, 0, 0, 0,
	 0, 0, 1, 0, 0, 0, 0, 0,
	 0, 1, 1, 1, 1, 1, 1, 0
};

char bc_char_3[] = {
	 0, 0, 1, 1, 1, 1, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 1, 1, 1, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 1, 1, 1, 1, 1, 0
};

char bc_char_4[] = {
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 1, 1, 1, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0
};

char bc_char_5[] = {
	 0, 0, 1, 1, 1, 1, 1, 0,
	 0, 0, 1, 0, 0, 0, 0, 0,
	 0, 0, 1, 0, 0, 0, 0, 0,
	 0, 0, 1, 1, 1, 1, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 1, 1, 1, 1, 1, 0
};

char bc_char_6[] = {
	 0, 0, 1, 1, 1, 1, 1, 0,
	 0, 0, 1, 0, 0, 0, 0, 0,
	 0, 0, 1, 0, 0, 0, 0, 0,
	 0, 0, 1, 1, 1, 1, 1, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 1, 1, 1, 1, 0
};

char bc_char_7[] = {
	 0, 0, 1, 1, 1, 1, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0
};

char bc_char_8[] = {
	 0, 0, 1, 1, 1, 1, 1, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 1, 1, 1, 1, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 1, 1, 1, 1, 0
};

char bc_char_9[] = {
	 0, 0, 1, 1, 1, 1, 1, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 0, 0, 0, 1, 0,
	 0, 0, 1, 1, 1, 1, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 0, 0, 0, 0, 1, 0,
	 0, 0, 1, 1, 1, 1, 1, 0
};

char bc_char_A[] = {
	 0, 0, 1, 1, 1, 1, 0, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 1, 1, 1, 1, 1, 1, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 1, 0, 0, 0, 0, 1, 0
};

char bc_char_B[] = {
	 0, 1, 1, 1, 1, 0, 0, 0,
	 0, 1, 0, 0, 1, 0, 0, 0,
	 0, 1, 0, 0, 1, 0, 0, 0,
	 0, 1, 1, 1, 1, 1, 0, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 1, 1, 1, 1, 1, 0, 0
};

char bc_char_C[] = {
	 0, 0, 1, 1, 1, 1, 1, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 0, 1, 1, 1, 1, 1, 0
};

char bc_char_D[] = {
	 0, 1, 1, 1, 1, 0, 0, 0,
	 0, 1, 0, 0, 0, 1, 0, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 1, 0, 0, 0, 0, 1, 0,
	 0, 1, 0, 0, 0, 1, 0, 0,
	 0, 1, 1, 1, 1, 0, 0, 0
};

char bc_char_E[] = {
	 0, 1, 1, 1, 1, 1, 1, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 1, 1, 1, 1, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 1, 1, 1, 1, 1, 0
};

char bc_char_F[] = {
	 0, 1, 1, 1, 1, 1, 1, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 1, 1, 1, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0,
	 0, 1, 0, 0, 0, 0, 0, 0
};


int bc_panel(int left, int top, int width, int height)
{
	mt_goToXY(left, top);
	mt_printText(LT);

	for (int i = left + 1; i < left + width; i++)
	{
		mt_printText(HL);
	}

	mt_printText(RT);

	for (int i = top + 1; i < top + height - 1; i++)
	{
		mt_goToXY(left,i);
		mt_printText(VL);
		mt_goToXY(left + width, i);
		mt_printText(VL);
	}

	mt_goToXY(left, top + height -1);
	mt_printText(LB);

	for (int i = left + 1; i < left + width; i++)
	{
		mt_printText(HL);
	}

	mt_printText(RB);

	return 0;

}

int bc_setBigCharPosition(int *big, int x, int y, int value)
{
	int pos;

	if ((x < 0) || (y < 0) || (x > 7) || (y > 7) || (value < 0) || (value > 1))
	{
		return -1;
	}
	if (y <= 3)
	{
		pos = 0;
	}
	else
	{
		pos = 1;
	}
	y = y % 4;
	if (value == 0)
	{
		big[pos] &= ~(1 << (y*8 + x));
	}
	else
	{
		big[pos] |= 1 << (y*8 + x);
	}
	
	return 0;
}

int bc_getBigCharPosition(int *big, int x, int y, int *value)
{
	int pos;

	if ((x < 0) || (y < 0) || (x > 7) || (y > 7))
	{
		return -1;
	}
	if (y <= 3)
	{
		pos = 0;
	}
	else
	{
		pos = 1;
	}
	y = y % 4;
	*value = (big[pos] >> (y*8 + x)) & 1;

	return 0;
}

int bc_printBigChar(int *big, int x, int y, enum Colors fg, enum Colors bg)
{
	int maxx, maxy;
	int pos, bit;
	int i, j;
	char row[9];
	
	mt_getScreenSize(&maxy, &maxx);
	if ((x <= 0) || (y <= 0) || (x + 8 > maxx) || (y + 8 > maxy))
	{
		return -1;
	}
	row[8] = '\0';
	mt_setFgColor(fg);
	mt_setBgColor(bg);
	for (i = 0; i < 8; i++)
	{
		mt_goToXY(x, y + i);
		for (j = 0; j < 8; j++)
		{
			pos = i >> 2;
			bit = (big[pos] >> ((i % 4) * 8 + j)) & 1;
			if (bit == 0)
			{
				mt_printText(" ");
			}
			else
			{
				mt_setBgColor(fg);
				mt_printText(" ");
				mt_setBgColor(bg);
			}
		}
		
	}
	mt_setFgColor(Default);
	mt_setBgColor(Default);
	return 0;
}

int bc_arrayToBig(int *big, char *arr)
{
	int counter = 0;
	
	for (int i = 0; i < 8; i++)
	{
		for (int j = 0; j < 8; j++)
		{
			bc_setBigCharPosition(big, j, i, arr[counter]);
			counter++;
		}
	}

	// for (i = 0; i < 64; i++) {
	// 	x = i % 8;
	// 	y = i / 8;
	// 	bc_setBigCharPosition(big, x, y, arr[i]);
	// }

	return 0;
}

int bc_writeBigChar(int fd, int* big, int count)
{
	if (write(fd, &count, sizeof(count)) == -1)
	{
		return ERR_WRITE;
	}

	if (write(fd, big, count * (sizeof(int)) * 2) == -1)
	{
		return ERR_TERM;
	}

	return 0;
}

int bc_readBigChar(int fd, int* big, int need_count, int *count)
{
	int cnt = read(fd, big, need_count * sizeof(int) * 2);
	if (cnt == -1)
	{
		return ERR_READ;
	}

	*count = cnt / (sizeof(int) * 2);

	return 0;
}